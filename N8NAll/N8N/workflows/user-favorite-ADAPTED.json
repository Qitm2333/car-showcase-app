{
  "name": "ç”¨æˆ·æ”¶è—å¤¹ç³»ç»Ÿï¼ˆé€‚é…ç‰ˆï¼‰",
  "nodes": [
    {
      "parameters": {
        "jsCode": "// æå–å¹¶éªŒè¯å‚æ•°\nconst body = $input.item.json.body;\nconst action = body.action || 'add';\nconst userID = body.userID;  // å‰ç«¯ä¼  inviteCode çš„å€¼\n\n// éªŒè¯å¿…å¡«å‚æ•°\nif (!userID) {\n  return {\n    json: {\n      success: false,\n      error: 'ç¼ºå°‘ç”¨æˆ·IDï¼ˆinviteCodeï¼‰'\n    }\n  };\n}\n\n// ========== 1. åˆ›å»ºæ”¶è—å¤¹ ==========\nif (action === 'createFolder') {\n  const { folderName, folderIcon } = body;\n  \n  if (!folderName) {\n    return {\n      json: {\n        success: false,\n        error: 'ç¼ºå°‘æ”¶è—å¤¹åç§°'\n      }\n    };\n  }\n  \n  const folderID = 'folder_' + new Date().toISOString().slice(0,10).replace(/-/g,'') + '_' + Math.random().toString(36).substr(2, 9);\n  \n  return {\n    json: {\n      action: 'createFolder',\n      folderID: folderID,\n      userID: userID,\n      folderName: folderName,\n      folderIcon: folderIcon || 'ğŸ“',\n      createTime: new Date().toISOString(),\n      status: 'active'\n    }\n  };\n}\n\n// ========== 2. æŸ¥çœ‹æ”¶è—å¤¹åˆ—è¡¨ ==========\nif (action === 'listFolders') {\n  return {\n    json: {\n      action: 'listFolders',\n      userID: userID\n    }\n  };\n}\n\n// ========== 3. æ·»åŠ æ”¶è—ï¼ˆæ”¯æŒæŒ‡å®šæ–‡ä»¶å¤¹ + åˆ†ç±»è§†è§’ï¼‰==========\nif (action === 'add') {\n  const { carID, carName, imageURL, folderID, category, viewType } = body;\n  \n  if (!carID || !carName || !imageURL) {\n    return {\n      json: {\n        success: false,\n        error: 'ç¼ºå°‘å¿…è¦å‚æ•°ï¼šcarID, carName æˆ– imageURL'\n      }\n    };\n  }\n  \n  const favoriteID = 'fav_' + new Date().toISOString().slice(0,10).replace(/-/g,'') + '_' + Math.random().toString(36).substr(2, 9);\n  \n  return {\n    json: {\n      action: 'add',\n      favoriteID: favoriteID,\n      userID: userID,\n      folderID: folderID || '',\n      carID: carID,\n      carName: carName,\n      imageURL: imageURL,\n      category: category || '',\n      viewType: viewType || '',\n      favoriteTime: new Date().toISOString(),\n      status: 'active'\n    }\n  };\n}\n\n// ========== 4. æŸ¥çœ‹æ”¶è—åˆ—è¡¨ï¼ˆæ”¯æŒæŒ‰æ–‡ä»¶å¤¹ç­›é€‰ï¼‰==========\nif (action === 'list') {\n  return {\n    json: {\n      action: 'list',\n      userID: userID,\n      folderID: body.folderID || ''\n    }\n  };\n}\n\n// ========== 5. åˆ é™¤æ”¶è— ==========\nif (action === 'delete') {\n  const { favoriteID } = body;\n  \n  if (!favoriteID) {\n    return {\n      json: {\n        success: false,\n        error: 'ç¼ºå°‘ favoriteID'\n      }\n    };\n  }\n  \n  return {\n    json: {\n      action: 'delete',\n      userID: userID,\n      favoriteID: favoriteID\n    }\n  };\n}\n\n// ========== 6. åˆ é™¤æ”¶è—å¤¹ ==========\nif (action === 'deleteFolder') {\n  const { folderID } = body;\n  \n  if (!folderID) {\n    return {\n      json: {\n        success: false,\n        error: 'ç¼ºå°‘ folderID'\n      }\n    };\n  }\n  \n  return {\n    json: {\n      action: 'deleteFolder',\n      userID: userID,\n      folderID: folderID\n    }\n  };\n}\n\nreturn {\n  json: {\n    success: false,\n    error: 'æœªçŸ¥æ“ä½œç±»å‹: ' + action\n  }\n};"
      },
      "name": "å¤„ç†å‚æ•°",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2
    }
  ],
  "connections": {},
  "meta": {
    "instanceId": "your-instance-id"
  }
}

